## Тестовое задание на Symfony 6

## Требования
- Docker
- Утилита Make

## Установка и запуск проекта
1. Клонировать репозиторий


2. Выполнить команду Make в склонированном проекте
```bash
make build up vendor migrate seed
```

для остановки контейнера используйте команду ```make down```

при инициализированном проекте запуск проекта с помощью команды ```make up```

## Команды Symfony для работы
- ```make seed``` заполнить БД тестовыми данными
- ```make deleteAuthors``` удалить авторов у которых нету книг

## **1. Получение всех книг**
**Метод:** `GET /book`

**Описание:** Получение всех книг (помимо полей книги, возвращает фамилию автора и наименование издательства).

**Результат полученный от запроса (JSON):**
```json
{
  "title": "Книга 1",
  "year": 2020,
  "publisherTitle": "Издательство А",
  "authors": [
    "Иванов",
    "Петров"
  ]
},
```

## **2. Создание нового автора**

**Метод:** `POST /author`

**Описание:** Авторизация по email и паролю.

**Тело запроса (JSON):**
```json
{
  "firstName": "Франц",
  "lastName": "Кафка"
}
```

**Ответ:** `"success": "Автор создан"`

**Ошибка:** `"error": "Поле firstName и lastName обязательны"`

## **3. Создание книги с существующим автором**

**Метод:** `POST /book`

**Описание:** Создание книги с привязкой к существующему автору.

**Тело запроса (JSON):**
```json
{
  "title": "К востоку от Эдема",
  "year": 1999,
  "authorIds": [4]
}
```

**Ответ:** `"success": "Книга создана"`

**Ошибка:** `'error' => 'Поле title и authorIds обязательны'`

## **4. Обновление информации о издателе**

**Метод:** `PUT /publisher/{id}`

**Описание:** Редактирование издателя по ID.

**Тело запроса (JSON):**
```json
{
  "title": "Эксклюзивная классика",
  "address": "Москва"
}
```

**Ответ:** `"success": "Издатель обновлен"`

**Ошибка:** `"error": "Издательство с ID {id} не найдено"`

## **5. Удаление книги/автора/издателя**

**Описание:** Удаление книги/автора/издателя по ID.

### **Метод:** `DELETE /book/{id}`

**Ответ:** `"success": "Книга удалена"`

**Ошибка:** `"error": "Книга с ID {id} не найдена"`

### **Метод:** `DELETE /author/{id}`

**Ответ:** `"success": "Автор удален"`

**Ошибка:** `"error": "Автор с ID 1 не найден."`

### **Метод:** `DELETE /publisher/{id}`

**Ответ:** `"success": "Издатель удален"`

**Ошибка:** `"error": "Издательство с ID {id} не может быть удалено, так как у него есть книги"`

**Ошибка:** `"error": "error": "Издательство с ID {id} не найдено"`